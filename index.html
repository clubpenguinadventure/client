<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">

        <title>Club Penguin</title>

        <link rel="stylesheet" href="assets/styles/styles.css" type="text/css">

        <!-- Fonts -->
        <script src="assets/scripts/lib/webfont.js"></script>

        <!-- Phaser -->
        <script src="https://cdn.jsdelivr.net/npm/phaser@3.80.1/dist/phaser.min.js"></script>
        <script src="assets/scripts/lib/phaser-cachebuster.min.js"></script>

        <!-- Ruffle -->
        <script src="https://cdn.jsdelivr.net/npm/@ruffle-rs/ruffle/ruffle.min.js"></script>

        <!-- Client bundle -->
        <script src="assets/scripts/client/yukon.bundle.js"></script>
    </head>

    <body>
		<div class="header" id="header">
			<div class="header-content">
				<div class="links">
					<a href="https://cpchat.net">Website Home</a>
					<a href="https://community.cpchat.net">Community</a>
					<a href="https://cpchat.net/support">Support</a>
					<a href="https://cpchat.net/legal">Legal</a>
					<a href="https://wiki.cpchat.net">Wiki</a>
				</div>
				<div class="buttons">
					<button id="largescreen">Large Screen</button>
					<button id="fullscreen">Full Screen</button>
					<button id="toggleDarkMode">Toggle Color</button>
				</div>
				<div class="links">
					<a href="#">Log Out</a>
				</div>
			</div>
		</div>
			<script>
				document.addEventListener('DOMContentLoaded', function() {
					const toggleButton = document.getElementById('toggleDarkMode');
					const fullscreenButton = document.getElementById('fullscreen');
					const largescreenButton = document.getElementById('largescreen');
					const body = document.body;
					let mode = 'light'; // Start with light mode by default
					let isLargeScreen = false; // Track large screen state
			
					// Apply initial mode based on system preference
					if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
						body.classList.add('dark-mode');
						mode = 'dark';
					} else {
						body.classList.add('light-mode');
						mode = 'light';
					}
			
					// Toggle between light, dark, and blue modes
					toggleButton.addEventListener('click', () => {
						if (mode === 'light') {
							body.classList.remove('light-mode');
							body.classList.add('dark-mode');
							mode = 'dark';
						} else if (mode === 'dark') {
							body.classList.remove('dark-mode');
							body.classList.add('blue-mode');
							mode = 'blue';
						} else if (mode === 'blue') {
							body.classList.remove('blue-mode');
							body.classList.add('light-mode');
							mode = 'light';
						}
			
						body.dispatchEvent(new Event('themeChanged'));
					});
			
					// Fullscreen button functionality (using original code to avoid Phaser error)
					fullscreenButton.addEventListener('click', () => {
						document.getElementById('header').style.display = 'none';
						const gameElement = document.getElementById('game');
						gameElement.style.maxWidth = '100%';
						gameElement.style.maxHeight = '100%';
						gameElement.style.height = '100%';
						document.documentElement.requestFullscreen(); // Fullscreen the entire document
					});
			
					// Exit fullscreen changes when fullscreen is exited
					document.addEventListener('fullscreenchange', () => {
						if (!document.fullscreenElement) {
							document.getElementById('header').style.display = 'flex';
							const gameElement = document.getElementById('game');
							gameElement.style.maxWidth = '1520px';
							gameElement.style.height = 'calc(100vh - 35px)'; // Adjust height based on header
						}
					});
			
					// Large Screen button functionality
					largescreenButton.addEventListener('click', () => {
						const gameElement = document.getElementById('game');
						if (!isLargeScreen) {
							gameElement.style.maxWidth = '90vw';
							gameElement.style.width = '90vw';
							gameElement.style.height = 'calc(90vh - 35px)'; // Adjust height based on header
							gameElement.style.margin = '0 auto'; // Center the game element
							isLargeScreen = true;
						} else {
							gameElement.style.maxWidth = '1520px';
							gameElement.style.width = '';
							gameElement.style.height = 'calc(100vh - 35px)';
							gameElement.style.margin = '0 auto';
							isLargeScreen = false;
						}
					});
				});
			</script>
        <div id="game" class="game"></div>
    </body>

</html>
